{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generated Recipe - {{ recipe.title }}</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Use the Inter font family */
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-slate-50 text-gray-800">

  <!-- Main container for the entire page -->
  <div class="container mx-auto max-w-5xl p-4 sm:p-6 lg:p-8">

      <!-- Header section -->
      <header class="flex items-center justify-between mb-8">
          <a href="{% url 'recipes:upload_food_image' %}"
             class="flex items-center text-gray-600 hover:text-gray-900 transition-colors duration-200">
              <!-- Back arrow icon -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none"
                   viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
              </svg>
              Try Another Dish
          </a>
          {% if recipe.error %}
          <h1 class="text-2xl md:text-3xl font-bold text-slate-800">
              Error!
          </h1>
          {% else %}
          <h1 class="text-2xl md:text-3xl font-bold text-slate-800">
              Recipe Generated!
          </h1>
          {% endif %}
      </header>

      <main class="space-y-8">

          <!-- ✅ Error State -->
          {% if recipe.error %}
          <section class="bg-red-50 p-6 sm:p-8 rounded-2xl shadow-sm border border-red-200">
              <h2 class="text-xl font-bold text-red-700 mb-2">Oops!</h2><span style="font-size:100px">&#128577;</span>
              <p class="text-red-600">{{ recipe.error }}</p>
          </section>

          <!-- ✅ Normal Recipe Layout -->
          {% else %}
          <!-- First Card: Recipe Title, Description, and Key Info -->
          <section class="bg-white p-6 sm:p-8 rounded-2xl shadow-sm relative">
              <div class="absolute top-6 right-6 bg-green-100 text-green-800 text-sm font-semibold px-4 py-1.5 rounded-full">
                  {{ recipe.difficulty }}
              </div>
              <h2 class="text-3xl font-bold text-gray-900 mb-2">Restaurant-Style {{ recipe.title }}</h2>
              <p class="text-gray-600 mb-8 max-w-3xl">A classic {{ recipe.title }}</p>

              <!-- Key Info Boxes -->
              <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 bg-orange-50/70 p-6 rounded-xl">
                  <div class="text-center">
                      <p class="text-sm text-gray-500 mb-1">Cook Time</p>
                      <p class="font-semibold text-gray-900">{{ recipe.cook_time }}</p>
                  </div>
                  <div class="text-center">
                      <p class="text-sm text-gray-500 mb-1">Servings</p>
                      <p class="font-semibold text-gray-900">{{ recipe.servings }}</p>
                  </div>
                  <div class="text-center">
                      <p class="text-sm text-gray-500 mb-1">Difficulty</p>
                      <p class="font-semibold text-gray-900">{{ recipe.difficulty }}</p>
                  </div>
              </div>
          </section>

          <!-- Second Card: Ingredients and Instructions -->
          <section class="bg-white p-6 sm:p-8 rounded-2xl shadow-sm grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12">
              <!-- Ingredients Column -->
              <div>
                  <h3 class="text-xl font-semibold text-gray-900 mb-4">Ingredients</h3>
                  <ul class="space-y-3">
                      {% for item in recipe.ingredients %}
                      <li class="flex items-start">
                          <span class="flex-shrink-0 mt-1.5 h-2 w-2 bg-orange-500 rounded-full mr-3"></span>
                          <span>{{ item }}</span>
                      </li>
                      {% endfor %}
                  </ul>
              </div>

              <!-- Instructions Column -->
              <div>
                  <h3 class="text-xl font-semibold text-gray-900 mb-4">Instructions</h3>
                  <ol class="list-decimal list-inside space-y-4 text-gray-600">
                      {% for step in recipe.steps %}
                      <li>{{ step }}</li>
                      {% endfor %}
                  </ol>
              </div>
          </section>

          <!-- Nutrition -->
          <section class="bg-white p-6 sm:p-8 rounded-2xl shadow-sm">
              <h3 class="text-xl font-semibold text-gray-900 mb-4">Nutrition Facts</h3>
              <ul class="space-y-3">
                  <li><strong>Calories:</strong> {{ recipe.nutrition.calories }}</li>
                  <li><strong>Protein:</strong> {{ recipe.nutrition.protein }}</li>
                  <li><strong>Carbs:</strong> {{ recipe.nutrition.carbs }}</li>
                  <li><strong>Fat:</strong> {{ recipe.nutrition.fat }}</li>
              </ul>
          </section>
          {% endif %}

      </main>
  </div>

</body>
</html>
