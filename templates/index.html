{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FoodSnap</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
  </head>
  <body class="min-h-screen">
    <!-- Landing -->
    <section id="landing" class="min-h-screen">
      <div class="container mx-auto px-4 py-12">
        <div class="grid md:grid-cols-2 gap-10 items-center">
          <!-- Copy / CTA -->
          <div class="space-y-6">
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-orange-100 text-orange-700 text-sm font-medium">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M6 2l1.5 3L6 8l3-1.5L12 8l-1.5-3L12 2l-3 1.5L6 2z"/></svg>
              AI-powered
            </div>
            <h1 class="text-4xl md:text-5xl font-extrabold leading-tight">
              Turn any food photo into a <span class="text-orange-600">step‑by‑step recipe</span>
            </h1>
            <p class="text-neutral-600 text-lg">
              Upload a dish photo (or pick a sample). We’ll infer ingredients and generate a chef-quality recipe.
            </p>

            <!-- Uploader -->
            <!-- <div class="max-w-2xl mx-auto mt-12"> -->
              <!-- Real Django form -->
              <!-- <form id="upload-form" method="post" enctype="multipart/form-data" class="space-y-4">
                {% csrf_token %}
                <label class="block">
                  <input id="file-input" type="file" name="food_image" accept="image/*" class="hidden" required />
                  <button type="button" onclick="document.getElementById('file-input').click()"
                    class="inline-flex items-center gap-2 px-5 py-3 rounded-xl bg-orange-600 text-white font-medium shadow hover:brightness-110">
                    <i class="fas fa-upload"></i>
                    Upload Dish Photo
                  </button>
                </label>
                <button type="submit" class="block px-5 py-3 rounded-xl bg-green-600 text-white font-medium shadow hover:brightness-110">
                  Generate Recipe
                </button>
              </form>
            </div> -->

            <div class="flex flex-wrap items-center gap-3">
              <button id="generate-btn" class="inline-flex items-center gap-2 px-5 py-3 rounded-xl bg-orange-600 text-white font-medium shadow-warm transition-smooth hover:brightness-110">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 5v14m7-7H5"/></svg>
                Upload dish photo
              </button>
              <span class="text-sm text-neutral-500">JPG, PNG up to 5MB</span>
            </div>
          </div>

          <!-- Hero image -->
          <div class="relative">
            <img src="{% static 'imgs/hero-food.jpg' %}" alt="Delicious food" class="rounded-2xl w-full h-[420px] object-cover shadow-elegant" />
            <div class="absolute -bottom-6 -left-6 bg-white rounded-2xl shadow-warm p-4 hidden md:block">
              <div class="font-semibold">Instant recipe</div>
              <div class="text-sm text-neutral-600">Cook at home like a pro</div>
            </div>
          </div>
        </div>

        <div class="max-w-2xl mx-auto mt-12">
          <!-- Real Django form -->
          <form id="upload-form" method="post" action="{% url 'recipes:upload_food_image' %}" enctype="multipart/form-data" class="flex flex-wrap justify-center gap-4">
            {% csrf_token %}

            <label>
              <input id="file-input" type="file" name="food_image" accept="image/*" class="hidden" required />
              <button type="button" onclick="document.getElementById('file-input').click()"
                class="inline-flex items-center gap-2 px-5 py-3 rounded-xl bg-orange-600 text-white font-medium shadow hover:brightness-110">
                <i class="fas fa-upload"></i>
                Upload Dish Photo
              </button>
            </label>

            <button type="submit"
              class="px-5 py-3 rounded-xl bg-green-600 text-white font-medium shadow hover:brightness-110">
              Generate Recipe
            </button>
          </form>
        </div>


        <!-- Uploader -->
        <div class="max-w-2xl mx-auto mt-12">
          <form method="post" enctype="multipart/form-data" action="{% url 'recipes:upload_food_image' %}">
            {% csrf_token %}
            <label id="drop-area"
              class="border-2 border-dashed rounded-2xl p-8 text-center cursor-pointer transition-smooth bg-white hover:shadow-warm block">

              <input id="file-input" type="file" name="food_image" accept="image/*" class="hidden" required />

              <div class="flex flex-col items-center gap-4">
                <div class="w-16 h-16 rounded-full bg-orange-100 flex items-center justify-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-orange-600" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M3 16l5-6 4 5 5-6 4 5"/>
                    <path d="M21 21H3V3"/>
                  </svg>
                </div>
                <div>
                  <p class="font-medium">Drag & drop your photo here</p>
                  <p class="text-sm text-neutral-500">or click to browse</p>
                </div>
              </div>
            </label>



            <!-- <div class="mt-4 text-center">
              <button type="submit"
                class="inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-orange-600 text-white font-medium shadow hover:brightness-110">
                <i class="fas fa-magic"></i>
                Generate Recipe
              </button>
            </div> -->
          </form>
        </div>



        <!-- Samples -->
        <div class="w-full max-w-4xl mx-auto mt-10">
          <h3 class="text-lg font-semibold mb-4 text-center">Or try these sample dishes</h3>
          <div id="sample-grid" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>
        </div>

        <!-- Features -->
        <div class="grid md:grid-cols-3 gap-8 py-16">
          <!-- AI-Powered Analysis -->
          <div class="text-center space-y-4">
            <div class="w-16 h-16 rounded-full bg-gradient-warm flex items-center justify-center mx-auto text-white text-2xl">
              <i class="fas fa-brain"></i>
            </div>
            <h3 class="text-xl font-semibold">AI-Powered Analysis</h3>
            <p class="text-neutral-600">Analyzes your food photo to identify ingredients and cooking methods.</p>
          </div>

          <!-- One-Click Recipes -->
          <div class="text-center space-y-4">
            <div class="w-16 h-16 rounded-full bg-gradient-warm flex items-center justify-center mx-auto text-white text-2xl">
              <i class="fas fa-utensils"></i>
            </div>
            <h3 class="text-xl font-semibold">One-Click Recipes</h3>
            <p class="text-neutral-600">Get a full ingredient list and step-by-step instructions instantly.</p>
          </div>

          <!-- Chef-Level Results -->
          <div class="text-center space-y-4">
            <div class="w-16 h-16 rounded-full bg-gradient-warm flex items-center justify-center mx-auto text-white text-2xl">
              <i class="fas fa-concierge-bell text-white text-2xl"></i> <!-- Pro icon, fallback below -->
            </div>
            <h3 class="text-xl font-semibold">Chef-Level Results</h3>
            <p class="text-neutral-600">Recreate restaurant-quality dishes at home with precise guidance.</p>
          </div>
        </div>

      </div>
    </section>

    <!-- Loading -->
    <section id="loader" class="min-h-screen hidden">
      <div class="min-h-screen flex items-center justify-center">
        <div class="rounded-2xl bg-white shadow p-10 text-center space-y-6">
          <div class="w-16 h-16 rounded-full bg-orange-100 flex items-center justify-center mx-auto animate-pulse">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-orange-600" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M12 2l3 7h7l-5.5 4 2 8-6.5-4.5L6.5 21l2-8L3 9h7z"/>
            </svg>
          </div>
          <div>
            <h3 class="text-xl font-semibold">Cooking up your recipe…</h3>
            <p class="text-neutral-600">Our AI chef is studying the image and creating a personalized recipe.</p>
          </div>
          <div class="w-64 mx-auto">
            <div class="h-2 bg-neutral-200 rounded-full overflow-hidden">
              <div class="h-full bg-orange-500 animate-pulse rounded-full w-3/4"></div>
            </div>
            <p class="text-xs text-neutral-500 mt-2 text-center">This usually takes 10–15 seconds</p>
          </div>
        </div>
      </div>
    </section>

    <!-- JS to handle loader -->
    <script>
      const form = document.getElementById('upload-form');
      const landing = document.getElementById('landing');
      const loader = document.getElementById('loader');

      form.addEventListener('submit', function() {
        landing.classList.add('hidden');   // hide upload section
        loader.classList.remove('hidden'); // show loader
      });
    </script>

    <script>
      // Elements
      const dropArea = document.getElementById('drop-area');
      const fileInput = document.getElementById('file-input');

      // Handle drag events
      ['dragenter','dragover'].forEach(evt=>{
        dropArea?.addEventListener(evt, e=>{
          e.preventDefault(); e.stopPropagation();
          dropArea.classList.add('dropzone-hover');
        });
      });
      ['dragleave','drop'].forEach(evt=>{
        dropArea?.addEventListener(evt, e=>{
          e.preventDefault(); e.stopPropagation();
          dropArea.classList.remove('dropzone-hover');
        });
      });

      // Handle file selection
      dropArea?.addEventListener('drop', e=>{
        const file = e.dataTransfer.files?.[0];
        if(file) previewFile(file);
      });
      fileInput?.addEventListener('change', e=>{
        const file = e.target.files?.[0];
        if(file) previewFile(file);
      });

      function previewFile(file){
        if(!file.type.startsWith('image/')){
          alert('Please upload an image');
          return;
        }
        const url = URL.createObjectURL(file);
        dropArea.innerHTML = `<img src="${url}" class="mx-auto max-h-48 rounded-lg"/>`;
      }

      // Optional: Render sample images (if you want to keep them)
      const sampleGrid = document.getElementById('sample-grid');
      if(sampleGrid){
        const samples = [
          {src:'{% static "imgs/sample-pizza.jpg" %}', name:'Margherita Pizza'},
          {src:'{% static "imgs/sample-pasta.jpg" %}', name:'Creamy Pasta'},
          {src:'{% static "imgs/sample-salad.jpg" %}', name:'Fresh Salad'}
        ];
        sampleGrid.innerHTML = samples.map(s => `
          <div class="group overflow-hidden rounded-xl bg-white shadow transition hover:-translate-y-0.5 cursor-pointer">
            <img src="${s.src}" alt="${s.name}" class="w-full h-40 object-cover group-hover:scale-105 transition"/>
            <div class="p-2 text-center font-medium text-sm">${s.name}</div>
          </div>
        `).join('');
      }
    </script>

  </body>
</html>
